---
title: PayWidget
description: Drop-in Flutter widget for the full FedaPay payment flow.
navigation:
  icon: i-lucide-smartphone
---

## Overview

`PayWidget` is a Flutter widget that embeds the FedaPay payment page in a WebView. It handles token generation, URL construction, and payment callbacks automatically.

## Usage

```dart
import 'package:feda_flutter/feda_flutter.dart';

PayWidget(
  apiKey: 'your_api_key',
  transactionId: 42,
  environment: FedaEnvironment.sandbox,
  onPaymentSuccess: () {
    print('Payment successful!');
  },
  onPaymentFailed: () {
    print('Payment failed.');
  },
  onPaymentCanceled: () {
    print('Payment canceled.');
  },
)
```

## Parameters

| Parameter | Type | Required | Description |
|---|---|---|---|
| `apiKey` | `String` | ✅ | Your FedaPay API key |
| `transactionId` | `int` | ✅ | ID of the transaction to pay |
| `environment` | `FedaEnvironment` | ✅ | `.sandbox` or `.live` |
| `onPaymentSuccess` | `VoidCallback?` | ❌ | Called on successful payment |
| `onPaymentFailed` | `VoidCallback?` | ❌ | Called on failed payment |
| `onPaymentCanceled` | `VoidCallback?` | ❌ | Called when user cancels |

## Environments

```dart
// Sandbox (testing)
environment: FedaEnvironment.sandbox

// Production
environment: FedaEnvironment.live
```

::caution
Always test with `FedaEnvironment.sandbox` before going live. Sandbox transactions are not real payments.
::

## How it works

1. `PayWidget` calls the `/transactions/{id}/token` endpoint to get a payment token
2. It constructs the checkout URL: `https://checkout.fedapay.com/pay/{token}`
3. The URL is loaded in a `WebViewController`
4. Payment result callbacks are triggered based on the redirect URL
